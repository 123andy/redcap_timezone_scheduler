{
    "name": "Timezone Scheduler",

    "namespace": "Stanford\\TimezoneScheduler",

    "description": "This module is intended to facilitate scheduling with support for multiple client timezones",

    "documentation": "README.md",

    "framework-version": 16,

    "authors": [
        {
            "name": "Andy Martin",
            "email": "andy123@stanford.edu",
            "institution": "Stanford Medicine"
        }
    ],

    "enable-every-page-hooks-on-system-pages": false,

    "enable-ajax-logging": false,

    "auth-ajax-actions": [
        "TestAction",
        "getTimezones",
        "getAppointmentData",
        "getAppointmentOptions",
        "cancelAppointment",
        "getSlot",
        "reserveSlot"
    ],

    "no-auth-ajax-actions": [
        "TestAction",
        "getTimezones",
        "getAppointmentData",
        "getAppointmentOptions",
        "cancelAppointment",
        "getSlot",
        "reserveSlot"

    ],

    "links": {
        "project": [
            {
                "name": "Timezone Scheduler Admin",
                "icon": "fas fa-cog",
                "url": "pages/admin.php"
            }
        ],
        "control-center": [

        ]
    },

    "no-auth-pages": [

    ],

    "project-settings": [
        {
            "name": "Configuration instance for each reservable appointment slot",
            "key": "instances",
            "type": "sub_settings",
            "repeatable": true,
            "sub_settings": [
                {
                    "key": "slot-project-id",
                    "name": "<b>Slot DB Project ID</b><br>Enter the project_id on this server that contains the database of available reservation slots.  The project MUST match the required project format (<i>i.e.</i> use the template to create any new slot projects)",
                    "required": true,
                    "type": "project-id"
                },
                {
                    "key": "appt-field",
                    "name": "<b>Appointment ID Field</b><br>Field in this project that will hold the reserved appointment slot once selected by a user",
                    "required": true,
                    "type": "field-list",
                    "field-type": "text"
                },
                {
                    "key": "appt-event-id",
                    "name": "<b>Appointment ID Field Event</b><br>The event id where the Appointment ID Field above resides.<br/>(<i>If you wish to use the same Appointment Id Field in a form that is enabled on multiple events, you must create a configuration instance for each event</i>)",
                    "required": true,
                    "type": "event-list"
                },
                {
                    "key": "appt-datetime-field",
                    "name": "<b>Appointment Server DateTime Field</b><br><i>(Optional)</i> Field in this project to hold the appointment date/time in the <b>server's timezone</b>.  This can be used to automate reminders to the participant using datediff logic.  This field <b>MUST BE VALIDATED AS Y-M-D H:M</b> - any other format may cause errors.  It must also be in the same event as the appointment id field above",
                    "required": false,
                    "type": "field-list",
                    "validation": "datetime"
                },
                {
                    "key": "appt-description-field",
                    "name": "<b>Appointment Description Field</b><br><i>(Optional)</i> Field in this project (as unvalidated <b>note field</b>).  A description of the appointment will be saved upon reservation and can be customized below:",
                    "required": false,
                    "type": "field-list",
                    "field-type": "text"
                },
                {
                    "key": "appt-description-format",
                    "name": "<b>Appointment Description Format</b><br><i>(Optional)</i> Specify the format (like piping) for the appointment description. This format will control what is stored in the Appointment Description Field specified above.  It can be useful for piping into the body of a reminder to the participant.<br/>`{{title}}` is slot title<br/>`{{date}}` is slot date field (yyyy-mm-dd)<br/>`{{time}}` is slot time field (hh:mm) in 24 hour time<br/>`{{server-time}}` means 'HH:MM am/pm' in server timezone<br/>`{{server-nicedate}}` means 'Sat, Jan 1st, 2025'<br/>`{{server-date}}` means mm/dd/yyyy<br/>`{{server-ts}}` means 'yyyy-mm-dd hh:mm' (timestamp)<br/>`{{server-tza}}` means server timezone abbreviation (e.g. PST, EDT)<br/>`{{client-time}}` means 'HH:MM am/pm' in client timezone<br/>`{{client-nicedate}}` means 'Sat, Jan 1st, 2025'<br/>`{{client-tza}}` means client timezone abbreviation (e.g. PST, CST, EDT)<br/>`{{client-date}}` means mm/dd/yyyy<br/>`{{client-ts}}` means 'yyyy-mm-dd hh:mm' (timestamp)",
                    "required": false,
                    "type": "textarea"
                },
                {
                    "key": "appt-participant-formatted-date-field",
                    "name": "<b>Appointment Participant Formatted Date</b><br><i>(Optional)</i> Select a <b>text field</b> (do not validate it as a date/time as this will fail!) and the nicely formatted string that the participant saw when selecting their appointment will be stored.  This could be piped into a reminder email so the participant can see the appointment time in their selected timezone.",
                    "required": false,
                    "type": "field-list",
                    "field-type": "text"
                },
                {
                    "key": "slot-record-url-field",
                    "name": "<b>Slot Record URL</b><br><i>(Optional)</i> This field will contain a URL to the Slot Project for this slot ID.  Useful for an admin to be able to jump to the Slot database.",
                    "required": false,
                    "type": "field-list",
                    "field-type": "text"
                },
                {
                    "key": "slot-filter-expression",
                    "name": "<b>Filter Expression</b><br>(to be developed) -- idea is that you could enter expression here that would be evaluated with the record's data and could be used to select a subset of available slots in the other database...",
                    "required": false,
                    "type": "text"
                },
                {
                    "key": "disabled",
                    "name": "<b>Disable</b><br>Check to disable this config without deleting it",
                    "type": "checkbox"
                }
            ]
        },
        {
            "key": "enable-project-debug-logging",
            "name": "<b>Enable Debug Logging</b><br><i>(optional)</i> Requires installation and configuration of emLogger",
            "required": false,
            "type": "checkbox"
        }
    ],

    "system-settings": [
        {
            "key": "enable-system-debug-logging",
            "name": "<b>Enable Debug Logging (system-wide)</b><i>(optional)</i> Requires installation and configuration of emLogger",
            "required": false,
            "type": "checkbox"
        }
    ],

    "crons": [

    ],

    "compatibility": {
        "php-version-min": "",
        "php-version-max": "",
        "redcap-version-min": "",
        "redcap-version-max": ""
    }
}
